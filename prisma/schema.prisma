model RawMaterial {
  id        Int      @id @default(autoincrement())
  name      String   @unique
  prices    RawMaterialPrice[]
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Item {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  yieldQuantity Int    @default(1)
  isFinal     Boolean  @default(false) // Final product or intermediate
  ingredients ItemIngredient[]
  sellingPrice Int?    // Manual selling price
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
}

model ItemIngredient {
  id          Int      @id @default(autoincrement())
  itemId      Int      // The item being crafted
  ingredientId Int     // Could be RawMaterial OR another Item
  ingredientType String // "RAW_MATERIAL" or "ITEM"
  quantity    Int
  item        Item     @relation("CraftedItem", fields: [itemId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
}

model ProductionOrder {
  id          Int      @id @default(autoincrement())
  itemId      Int
  quantity    Int
  totalCost   Int      // Auto-calculated
  sellingPrice Int     // Manual input
  expectedProfit Int   // Auto-calculated: (sellingPrice * quantity) - totalCost
  date        DateTime @default(now())
  item        Item     @relation(fields: [itemId], references: [id], onDelete: Cascade)
  createdAt   DateTime @default(now())
}